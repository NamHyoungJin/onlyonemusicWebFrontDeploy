(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7769],{19945:(e,t,r)=>{Promise.resolve().then(r.bind(r,28656))},25784:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(23464);let a=()=>{let e="https://api.onlyonemusic.com/api";return e?e.endsWith("/api")?e:"".concat(e,"/api"):"http://localhost:8000/api"},c=s.A.create({baseURL:a(),withCredentials:!0});c.interceptors.request.use(e=>{{let t=localStorage.getItem("access_token");t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e.response&&401===e.response.status&&!t._retry){t._retry=!0;try{let e,n=localStorage.getItem("refresh_token"),o="".concat(a(),"/token/refresh/"),l=await s.A.post(o,{refresh:n},{withCredentials:!0});if(l.data.onlyonemusicAPIResponse){var r,i;let t=l.data.onlyonemusicAPIResponse;"00"===t.ErrorCode&&(null==(r=t.Result)?void 0:r.access)?e=t.Result.access:console.error("❌ [axios.ts] 새로운 포맷 조건 불만족 - ErrorCode:",t.ErrorCode,"Result.access 존재:",!!(null==(i=t.Result)?void 0:i.access))}else l.data.access?e=l.data.access:console.error("❌ [axios.ts] 지원되지 않는 응답 포맷:",l.data);return e&&"string"==typeof e&&e.trim().length>0?localStorage.setItem("access_token",e):(console.error("❌ [axios.ts] 유효하지 않은 access_token:",e),console.error("❌ [axios.ts] 토큰 갱신 실패 - undefined 또는 빈 값")),e&&"string"==typeof e&&e.trim().length>0&&(t.headers=t.headers||{},t.headers.Authorization="Bearer ".concat(e)),c(t)}catch(e){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/membership/login",Promise.reject(e)}}return Promise.reject(e)});let i=c},28656:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(95155),a=r(12115),c=r(6874),i=r.n(c),n=r(10351),o=r(25784),l=r(79312),u=r.n(l);function h(e){let{searchText:t,onSearchTextChange:r,onSearch:a}=e;return(0,s.jsxs)("div",{className:u().searchBar,children:[(0,s.jsxs)("div",{className:u().searchInputWrapper,children:[(0,s.jsx)(n.CKj,{className:u().searchIcon}),(0,s.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"곡명, 작사자, 작곡자, 가사 첫 줄 등을 입력하세요",className:u().searchInput,onKeyPress:e=>{"Enter"===e.key&&a()}})]}),(0,s.jsx)("button",{onClick:a,className:u().searchButton,children:"검색"})]})}function d(e){let{searchText:t}=e,[r,c]=(0,a.useState)([]),[n,l]=(0,a.useState)(!1),[d,m]=(0,a.useState)(null),[p,_]=(0,a.useState)(1),[x,g]=(0,a.useState)(1),[y,b]=(0,a.useState)(t||""),[f,v]=(0,a.useState)(t||""),[S,j]=(0,a.useState)(null),w=void 0!==t?t:f;return(0,a.useEffect)(()=>{!async function(){l(!0),m(null);try{let e=new URLSearchParams({page:p.toString(),page_size:"15"});w&&w.trim()&&e.append("search",w.trim());let t=await o.A.get("/music/copyright-contract/search/?".concat(e.toString()));c(t.data.results||[]),g(Math.ceil((t.data.count||0)/15)||1)}catch(r){var e,t;m((null==(t=r.response)||null==(e=t.data)?void 0:e.detail)||r.message||"에러가 발생했습니다.")}finally{l(!1)}}()},[p,w]),(0,s.jsxs)("div",{className:u().container,children:[void 0===t&&(0,s.jsx)(h,{searchText:y,onSearchTextChange:b,onSearch:()=>{if(y.trim().length<2)return void j("검색어는 공백 없이 2글자 이상 입력해야 합니다.");j(null),v(y),_(1)}}),S&&(0,s.jsx)("div",{className:u().error,children:S}),n&&(0,s.jsxs)("div",{className:u().loading,children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("p",{style:{marginTop:"8px"},children:"검색 중..."})]}),d&&(0,s.jsx)("div",{className:u().error,children:d}),!n&&!d&&r.length>0&&(0,s.jsxs)(s.Fragment,{children:[r.map((e,t)=>(0,s.jsx)(a.Fragment,{children:(0,s.jsxs)("div",{className:u().item,children:[(0,s.jsxs)("div",{className:u().header,children:[(0,s.jsx)("div",{className:u().headerContent,children:(0,s.jsx)("div",{children:(0,s.jsx)(i(),{href:"/music/detail?musicSid=".concat(e.musicSid),className:u().titleLink,children:(0,s.jsxs)("span",{className:"".concat(u().title," ").concat(u().titleText),children:[e.musicKorName,e.musicEngName&&(0,s.jsxs)("span",{className:u().engTitle,children:["(",e.musicEngName,")"]})]})})})}),(0,s.jsx)("span",{className:u().code,children:e.musicSid})]}),(0,s.jsxs)("div",{className:u().contentRow,children:[e.musicFirstLineLyrics&&(0,s.jsx)("div",{className:"".concat(u().lyrics," ").concat(u().lyricsContainer),children:(0,s.jsx)("span",{className:u().lyricsText,children:e.musicFirstLineLyrics})}),(0,s.jsxs)("div",{className:"".concat(u().writers," ").concat(u().writersContainer),children:[e.musicWrite&&(0,s.jsxs)("span",{className:u().writer,children:[e.musicWrite," 작사"]}),e.musicCompose&&(0,s.jsxs)("span",{className:u().writer,children:[e.musicCompose," 작곡"]}),e.musicChord&&e.musicChord.trim()&&e.musicChordScalesName&&e.musicChordScalesName.trim()&&(0,s.jsxs)("span",{className:u().writer,children:["Key: ",e.musicChordScalesName]})]})]})]})},e.musicSid||t)),x>1&&(0,s.jsxs)("div",{className:"flex justify-center mt-8 gap-2",children:[(0,s.jsx)("button",{className:"px-3 py-1 rounded border bg-white text-gray-700 disabled:opacity-50",onClick:()=>_(e=>Math.max(1,e-1)),disabled:1===p,children:"이전"}),(0,s.jsx)("button",{className:"px-3 py-1 rounded border ".concat(1===p?"bg-blue-600 text-white":"bg-white text-gray-700"),onClick:()=>_(1),disabled:1===p,children:"1"}),p>6&&x>10&&(0,s.jsx)("span",{className:"px-1",children:"..."}),(()=>{let e=Math.max(2,p-4),t=Math.min(x-1,p+4);p<=6?(e=2,t=Math.min(9,x-1)):p>=x-5&&(e=Math.max(2,x-8),t=x-1);let r=[];for(let a=e;a<=t;a++)r.push((0,s.jsx)("button",{className:"px-3 py-1 rounded border ".concat(a===p?"bg-blue-600 text-white":"bg-white text-gray-700"),onClick:()=>_(a),disabled:a===p,children:a},a));return r})(),p<x-5&&x>10&&(0,s.jsx)("span",{className:"px-1",children:"..."}),x>1&&(0,s.jsx)("button",{className:"px-3 py-1 rounded border ".concat(p===x?"bg-blue-600 text-white":"bg-white text-gray-700"),onClick:()=>_(x),disabled:p===x,children:x}),(0,s.jsx)("button",{className:"px-3 py-1 rounded border bg-white text-gray-700 disabled:opacity-50",onClick:()=>_(e=>Math.min(x,e+1)),disabled:p===x,children:"다음"})]})]}),!n&&!d&&0===r.length&&w&&(0,s.jsxs)("div",{className:u().noResults,children:[(0,s.jsx)("p",{children:"검색 결과가 없습니다."}),(0,s.jsx)("p",{children:"다른 검색어를 시도해보세요."})]})]})}function m(){let[e,t]=(0,a.useState)(""),[r,c]=(0,a.useState)("");return(0,a.useEffect)(()=>{let t=setTimeout(()=>{c(e)},500);return()=>clearTimeout(t)},[e]),(0,s.jsxs)("div",{style:{width:"100%",maxWidth:1200,margin:"40px auto 0 auto",paddingLeft:10,paddingRight:10},children:[(0,s.jsx)("div",{style:{position:"relative",width:"100%",height:220,background:"url(/copyrightSearch.png) center/cover no-repeat",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:32,borderRadius:24,overflow:"hidden"},children:(0,s.jsx)("div",{style:{position:"relative",zIndex:2,width:"100%",maxWidth:800},children:(0,s.jsx)(h,{searchText:e,onSearchTextChange:t,onSearch:()=>{c(e)}})})}),(0,s.jsx)(d,{searchText:r})]})}},74436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>u});var s=r(12115),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},c=s.createContext&&s.createContext(a),i=["attr","size","title"];function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){var s,a,c;s=e,a=t,c=r[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in s?Object.defineProperty(s,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[a]=c}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){return t=>s.createElement(h,n({attr:l({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,l({key:r},t.attr),e(t.child)))}(e.child))}function h(e){var t=t=>{var r,{attr:a,size:c,title:o}=e,u=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)r=c[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,i),h=c||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,u,{className:r,style:l(l({color:e.color||t.color},t.style),e.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&s.createElement("title",null,o),e.children)};return void 0!==c?s.createElement(c.Consumer,null,e=>t(e)):t(a)}},79312:e=>{e.exports={container:"MusicSearch_container__q485Z",searchBar:"MusicSearch_searchBar__BT_lV",searchInputWrapper:"MusicSearch_searchInputWrapper__kXX7K",searchIcon:"MusicSearch_searchIcon__YwAcp",searchBox:"MusicSearch_searchBox__Fpr4g",searchInput:"MusicSearch_searchInput__gVbI3",searchButton:"MusicSearch_searchButton__yHpUj",item:"MusicSearch_item__9l9Hm",header:"MusicSearch_header__j8Cp9",icon:"MusicSearch_icon__w6pYS",title:"MusicSearch_title__QwFKT",code:"MusicSearch_code__ctHdQ",writers:"MusicSearch_writers__A9ODU",writer:"MusicSearch_writer__tQPmO",desc:"MusicSearch_desc__mKOf1",divider:"MusicSearch_divider__QJlNU",lyrics:"MusicSearch_lyrics__8YYVx",lyricsLabel:"MusicSearch_lyricsLabel__w1JrD",lyricsText:"MusicSearch_lyricsText__6UkPU",footer:"MusicSearch_footer__vS__B",date:"MusicSearch_date___ojB4",copyrightHolder:"MusicSearch_copyrightHolder__YITGr",noResults:"MusicSearch_noResults__43pak",loading:"MusicSearch_loading__twVG4",error:"MusicSearch_error__J1I27",empty:"MusicSearch_empty__I_qdN",pagination:"MusicSearch_pagination__sTxSM",paginationButton:"MusicSearch_paginationButton__rWgaL",active:"MusicSearch_active__gBHG1",headerContent:"MusicSearch_headerContent__PmJtU",titleLink:"MusicSearch_titleLink__sMMVJ",titleText:"MusicSearch_titleText__lLel4",engTitle:"MusicSearch_engTitle__7gO05",contentRow:"MusicSearch_contentRow__h_84n",lyricsContainer:"MusicSearch_lyricsContainer__5YVqp",writersContainer:"MusicSearch_writersContainer__YT46S"}}},e=>{var t=t=>e(e.s=t);e.O(0,[2907,844,3464,6874,8441,1684,7358],()=>t(19945)),_N_E=e.O()}]);