(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5308],{35695:(e,a,t)=>{"use strict";var s=t(18999);t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},51154:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},60302:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var s=t(95155),l=t(12115),i=t(35695),n=t(34964),r=t(97168),u=t(51154),m=t(5196);let c=(0,t(19946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var o=t(25784),d=t(16668),g=t(27566),b=t(56815);function p(){let e=(0,i.useSearchParams)(),[a,t]=(0,l.useState)(null),[p,h]=(0,l.useState)("basic"),[y,x]=(0,l.useState)(!0),[v,A]=(0,l.useState)(null),[N,k]=(0,l.useState)(null),[f,j]=(0,l.useState)({albumSid:"",albumName:"",albumSubName:"",albumGubn:"",gtinCode:"",agency:"",distributor:"(주)온리원뮤직",artist:"",mimsMedia:"",releaseDate:"",releaseNation:"",albumTheme:"",albumStatus:"",mimsTheme:"",productionDate:"",albumType:"",albumDetailsTheme:"",albumImage:null,imagePreview:null,albumReview:"",langeData:{kor:{name:"",subName:"",artist:"",agency:"",distribution:""},eng:{name:"",subName:"",artist:"",agency:"",distribution:""},jpn:{name:"",subName:"",artist:"",agency:"",distribution:""},chn:{name:"",subName:"",artist:"",agency:"",distribution:""}}}),[D,S]=(0,l.useState)({}),[T,w]=(0,l.useState)(null),[R,P]=(0,l.useState)([]),[C,L]=(0,l.useState)(!1);(0,l.useEffect)(()=>{t(e.get("musicAlbumSid"))},[e]),(0,l.useEffect)(()=>{},[N,f.albumStatus]),(0,l.useMemo)(()=>"SYS25B20B001"===((null==N?void 0:N.musicAlbumStatus)||f.albumStatus),[null==N?void 0:N.musicAlbumStatus,f.albumStatus]),(0,l.useEffect)(()=>{a&&(async()=>{var e,t,s,l,i,n,r,u,m;try{x(!0),A(null);let i=await o.A.get("/music/albumsNeigright/".concat(a));if((null==(t=i.data)||null==(e=t.onlyonemusicAPIResponse)?void 0:e.ErrorCode)==="00"){let e=i.data.onlyonemusicAPIResponse.Result;k(e),e.albumImageUrl&&j(a=>({...a,imagePreview:e.albumImageUrl}))}else A((null==(l=i.data)||null==(s=l.onlyonemusicAPIResponse)?void 0:s.Message)||"앨범 정보를 불러오는데 실패했습니다.")}catch(e){A((null==(r=e.response)||null==(n=r.data)||null==(i=n.onlyonemusicAPIResponse)?void 0:i.Message)||(null==(m=e.response)||null==(u=m.data)?void 0:u.detail)||e.message||"앨범 정보를 불러오는 중 오류가 발생했습니다.")}finally{x(!1)}})()},[a]);let I=e=>{w({trackUniqueCode:e.trackUniqueCode,cdNumber:e.cdNumber,trackNumber:e.trackNumber,trackName:e.trackName,trackSubtitle:"",trackArtist:"",participatingArtist:"",featuring:"",performer:"",playbackTime:"",trackGenre:"",trackSubGenre:"",mimsGenre:"",trackAgency:"",trackDistributor:"(주)온리원뮤직",lyricsBy:"",composedBy:"",arrangementBy:"",isrcCode:"",uciCode:"",soribadaKid:"",isTitleTrack:e.isTitleTrack,isInstrumental:!1,hasMusicVideo:!1,musicVideoReviewDate:"",musicVideoReviewStation:"",isActive:!0,trackLyrics:"",wavFile:null,wavRates:"",wavPlayTime:"",wavBits:"",wavSize:"",mp3File:null,mp3Rates:"",mp3PlayTime:"",mp3Bits:"",mp3Size:"",flacFile:null,flacRates:"",flacPlayTime:"",flacBits:"",flacSize:"",mp4File:null,mp4Encode:"",mp4PlayTime:"",mp4FrameRate:"",mp4Resolution:"",trackTitleEn:"",trackSubTitleEn:"",trackArtistEn:"",trackTitleJp:"",trackSubTitleJp:"",trackArtistJp:"",trackTitleCn:"",trackSubTitleCn:"",trackArtistCn:"",youtubeUrl:"",youtubeTitle:"",youtubeDescription:""})},B=async()=>{var e,t,s,l,i,n,r,u,m,c,d;if(!a)return;let g=[];if(f.albumName||g.push("앨범명"),f.artist||g.push("아티스트"),f.releaseNation||g.push("발매 국가"),f.productionDate||g.push("앨범 제작일"),f.agency||g.push("제작사(기획사)"),f.albumGubn||g.push("앨범 구분"),f.albumType||g.push("앨범 성격"),f.albumTheme||g.push("앨범 장르"),f.albumDetailsTheme||g.push("앨범 세부 장르"),g.length>0){alert("다음 필수 항목을 입력해주세요:\n\n".concat(g.join("\n"))),h("basic");return}try{L(!0);let r={musicAlbumName:f.albumName,musicAlbumArtist:f.artist,musicAlbumGubn:f.albumGubn,musicAlbumNation:f.releaseNation,musicAlbumProductionDate:f.productionDate,musicAlbumAgency:f.agency,musicAlbumType:f.albumType,musicAlbumTheme:f.albumTheme,musicAlbumDetailsTheme:f.albumDetailsTheme,musicAlbumReview:f.albumReview||"",musicAlbumMedia:f.mimsMedia||"",musicAlbumMimsTheme:f.mimsTheme||"",musicAlbumGtinCode:f.gtinCode||"",langeData:{}};(f.langeData.eng.name||f.langeData.eng.artist||f.langeData.eng.agency)&&(r.langeData.eng={musicAlbumLangeName:f.langeData.eng.name||"",musicAlbumLangeSecoundName:f.langeData.eng.subName||"",musicAlbumLangeArtist:f.langeData.eng.artist||"",musicAlbumLangeAgency:f.langeData.eng.agency||"",musicAlbumLangeDistribution:f.langeData.eng.distribution||"OnlyOneMusic Co., Ltd."}),(f.langeData.jpn.name||f.langeData.jpn.artist||f.langeData.jpn.agency)&&(r.langeData.jpn={musicAlbumLangeName:f.langeData.jpn.name||"",musicAlbumLangeSecoundName:f.langeData.jpn.subName||"",musicAlbumLangeArtist:f.langeData.jpn.artist||"",musicAlbumLangeAgency:f.langeData.jpn.agency||"",musicAlbumLangeDistribution:f.langeData.jpn.distribution||"(株)オンリーワンミュージック"}),(f.langeData.chn.name||f.langeData.chn.artist||f.langeData.chn.agency)&&(r.langeData.chn={musicAlbumLangeName:f.langeData.chn.name||"",musicAlbumLangeSecoundName:f.langeData.chn.subName||"",musicAlbumLangeArtist:f.langeData.chn.artist||"",musicAlbumLangeAgency:f.langeData.chn.agency||"",musicAlbumLangeDistribution:f.langeData.chn.distribution||"(株)唯一音乐"}),0===Object.keys(r.langeData).length&&delete r.langeData;let u=await o.A.put("/music/neigright/albumSubmissionUpdate/".concat(a),r);if((null==(t=u.data)||null==(e=t.onlyonemusicAPIResponse)?void 0:e.ErrorCode)==="00"){alert("앨범 정보가 성공적으로 수정되었습니다.");let e=await o.A.get("/music/albumsNeigright/".concat(a));if((null==(l=e.data)||null==(s=l.onlyonemusicAPIResponse)?void 0:s.ErrorCode)==="00"){let a=e.data.onlyonemusicAPIResponse.Result;k(a),a.albumImageUrl&&j(e=>({...e,imagePreview:a.albumImageUrl}))}}else alert((null==(n=u.data)||null==(i=n.onlyonemusicAPIResponse)?void 0:i.Message)||"앨범 수정에 실패했습니다.")}catch(e){alert((null==(m=e.response)||null==(u=m.data)||null==(r=u.onlyonemusicAPIResponse)?void 0:r.Message)||(null==(d=e.response)||null==(c=d.data)?void 0:c.detail)||e.message||"앨범 수정 중 오류가 발생했습니다.")}finally{L(!1)}};return a?y?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)(u.A,{className:"w-8 h-8 animate-spin text-blue-500 mr-3"}),(0,s.jsx)("span",{className:"text-gray-600",children:"앨범 정보를 불러오는 중..."})]})})}):v?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-red-500 text-lg",children:v})})})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"앨범 등록"}),(0,s.jsx)("p",{className:"text-gray-600",children:"앨범 정보를 입력하고 수정할 수 있습니다."})]}),(0,s.jsxs)(n.tU,{value:p,onValueChange:h,className:"w-full",children:[(0,s.jsxs)(n.j7,{className:"grid w-full grid-cols-3 mb-6",children:[(0,s.jsxs)(n.Xi,{value:"basic",className:"flex items-center gap-2",children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),"앨범기본정보"]}),(0,s.jsx)(n.Xi,{value:"track",className:"flex items-center gap-2",children:"트랙 정보"}),(0,s.jsx)(n.Xi,{value:"file",className:"flex items-center gap-2",children:"음원 파일 업로드"})]}),(0,s.jsx)(n.av,{value:"basic",children:(0,s.jsx)(d.A,{formData:f,errors:D,handleInputChange:(e,a)=>{j(t=>({...t,[e]:a})),D[e]&&S(a=>({...a,[e]:""}))},handleImageChange:e=>{var a;let t=null==(a=e.target.files)?void 0:a[0];if(t){if(t.size>0xa00000)return void alert("이미지 파일 크기는 10MB 이하여야 합니다.");if(!t.type.startsWith("image/"))return void alert("이미지 파일만 업로드 가능합니다.");j(e=>({...e,albumImage:t}));let e=new FileReader;e.onloadend=()=>{j(a=>({...a,imagePreview:e.result}))},e.readAsDataURL(t)}},removeImage:()=>{j(e=>({...e,albumImage:null,imagePreview:null}))},handleLangeChange:(e,a,t)=>{j(s=>({...s,langeData:{...s.langeData,[e]:{...s.langeData[e],[a]:t}}}))},albumData:N})}),(0,s.jsx)(n.av,{value:"track",children:(0,s.jsx)(g.A,{selectedTrack:T,trackList:R,onTrackChange:w,onTrackListChange:P,onTrackSelect:I})}),(0,s.jsx)(n.av,{value:"file",children:(0,s.jsx)(b.A,{selectedTrack:T,trackList:R,onTrackSelect:I,onTrackChange:(e,a)=>{w(t=>t?{...t,[e]:a}:{...{trackUniqueCode:"",cdNumber:"",trackNumber:"",trackName:"",trackSubtitle:"",trackArtist:"",participatingArtist:"",featuring:"",performer:"",playbackTime:"",trackGenre:"",trackSubGenre:"",mimsGenre:"",trackAgency:"",trackDistributor:"(주)온리원뮤직",lyricsBy:"",composedBy:"",arrangementBy:"",isrcCode:"",uciCode:"",soribadaKid:"",isTitleTrack:!1,isInstrumental:!1,hasMusicVideo:!1,musicVideoReviewDate:"",musicVideoReviewStation:"",isActive:!0,trackLyrics:"",wavFile:null,wavRates:"",wavPlayTime:"",wavBits:"",wavSize:"",mp3File:null,mp3Rates:"",mp3PlayTime:"",mp3Bits:"",mp3Size:"",flacFile:null,flacRates:"",flacPlayTime:"",flacBits:"",flacSize:"",mp4File:null,mp4Encode:"",mp4PlayTime:"",mp4FrameRate:"",mp4Resolution:"",trackTitleEn:"",trackSubTitleEn:"",trackArtistEn:"",trackTitleJp:"",trackSubTitleJp:"",trackArtistJp:"",trackTitleCn:"",trackSubTitleCn:"",trackArtistCn:"",youtubeUrl:"",youtubeTitle:"",youtubeDescription:""},[e]:a})}})})]}),"SYS25B20B001"===((null==N?void 0:N.musicAlbumStatus)||f.albumStatus)?(0,s.jsxs)("div",{className:"mt-8 flex justify-end gap-4",children:[(0,s.jsx)(r.$,{variant:"outline",size:"lg",children:"취소"}),(0,s.jsx)(r.$,{size:"lg",onClick:B,disabled:C,className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700",children:C?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.A,{className:"h-4 w-4 animate-spin mr-2"}),"수정 중..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c,{className:"h-4 w-4 mr-2"}),"수정하기"]})})]}):null]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)(u.A,{className:"w-8 h-8 animate-spin text-blue-500 mr-3"}),(0,s.jsx)("span",{className:"text-gray-600",children:"로딩중..."})]})})})}function h(){return(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)(u.A,{className:"w-8 h-8 animate-spin text-blue-500 mr-3"}),(0,s.jsx)("span",{className:"text-gray-600",children:"로딩중..."})]})})}),children:(0,s.jsx)(p,{})})}},97174:(e,a,t)=>{Promise.resolve().then(t.bind(t,60302))}},e=>{var a=a=>e(e.s=a);e.O(0,[3464,4277,4109,8588,1886,5372,8441,1684,7358],()=>a(97174)),_N_E=e.O()}]);