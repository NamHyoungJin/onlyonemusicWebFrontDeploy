(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[670],{8333:e=>{e.exports={container:"MusicDetail_container__BQx_O",backButton:"MusicDetail_backButton__3plyA",backLink:"MusicDetail_backLink__bpZbf",musicInfo:"MusicDetail_musicInfo__Y94dw",header:"MusicDetail_header__dYdch",titleSection:"MusicDetail_titleSection__9sVAq",title:"MusicDetail_title__ZUMjk",engTitleSection:"MusicDetail_engTitleSection__PjnOQ",engTitle:"MusicDetail_engTitle__0_iMB",firstLineLyricsSection:"MusicDetail_firstLineLyricsSection__q6GDh",firstLineLyrics:"MusicDetail_firstLineLyrics__vdwrW",code:"MusicDetail_code__pGQgh",infoGrid:"MusicDetail_infoGrid__GS7gk",infoItem:"MusicDetail_infoItem__f_h_k",infoIcon:"MusicDetail_infoIcon__HZIVu",lyricsSection:"MusicDetail_lyricsSection__nw0sc",lyricsTabs:"MusicDetail_lyricsTabs___qZGN",tabButtons:"MusicDetail_tabButtons__NuYT4",tabButton:"MusicDetail_tabButton__Szgmu",activeTab:"MusicDetail_activeTab__oVW3A",tabContent:"MusicDetail_tabContent__y_mFD",tabContainer:"MusicDetail_tabContainer__8p9pS",tab:"MusicDetail_tab__y3_bu",lyricsContent:"MusicDetail_lyricsContent__sMGRB",lyricItem:"MusicDetail_lyricItem__dr4rb",lyricText:"MusicDetail_lyricText__WZF6D",lyricsList:"MusicDetail_lyricsList__dkcUa",lyricHeader:"MusicDetail_lyricHeader__Pd0Wi",lyricMeta:"MusicDetail_lyricMeta__tNAlm",lyricKind:"MusicDetail_lyricKind__bcpfe",translationInfo:"MusicDetail_translationInfo__yYahU",lyricContent:"MusicDetail_lyricContent__ny0HD",copyrightSection:"MusicDetail_copyrightSection__MiV45",copyright:"MusicDetail_copyright__5Yxcr",loading:"MusicDetail_loading__IBrnd",error:"MusicDetail_error__IVcZy",noticeBox:"MusicDetail_noticeBox__XzTR1",noticeTitle:"MusicDetail_noticeTitle__IEBH_",noticeList:"MusicDetail_noticeList__LegYs",noticeIcon:"MusicDetail_noticeIcon__idQks"}},25784:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s(23464);let r=()=>{let e="https://api.onlyonemusic.com/api";return e?e.endsWith("/api")?e:"".concat(e,"/api"):"http://localhost:8000/api"},c=i.A.create({baseURL:r(),withCredentials:!0});c.interceptors.request.use(e=>{{let t=localStorage.getItem("access_token");t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e.response&&401===e.response.status&&!t._retry){t._retry=!0;try{let e,a=localStorage.getItem("refresh_token"),l="".concat(r(),"/token/refresh/"),o=await i.A.post(l,{refresh:a},{withCredentials:!0});if(o.data.onlyonemusicAPIResponse){var s,n;let t=o.data.onlyonemusicAPIResponse;"00"===t.ErrorCode&&(null==(s=t.Result)?void 0:s.access)?e=t.Result.access:console.error("❌ [axios.ts] 새로운 포맷 조건 불만족 - ErrorCode:",t.ErrorCode,"Result.access 존재:",!!(null==(n=t.Result)?void 0:n.access))}else o.data.access?e=o.data.access:console.error("❌ [axios.ts] 지원되지 않는 응답 포맷:",o.data);return e&&"string"==typeof e&&e.trim().length>0?localStorage.setItem("access_token",e):(console.error("❌ [axios.ts] 유효하지 않은 access_token:",e),console.error("❌ [axios.ts] 토큰 갱신 실패 - undefined 또는 빈 값")),e&&"string"==typeof e&&e.trim().length>0&&(t.headers=t.headers||{},t.headers.Authorization="Bearer ".concat(e)),c(t)}catch(e){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/membership/login",Promise.reject(e)}}return Promise.reject(e)});let n=c},35695:(e,t,s)=>{"use strict";var i=s(18999);s.o(i,"usePathname")&&s.d(t,{usePathname:function(){return i.usePathname}}),s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}}),s.o(i,"useSearchParams")&&s.d(t,{useSearchParams:function(){return i.useSearchParams}})},74436:(e,t,s)=>{"use strict";s.d(t,{k5:()=>u});var i=s(12115),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},c=i.createContext&&i.createContext(r),n=["attr","size","title"];function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach(function(t){var i,r,c;i=e,r=t,c=s[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in i?Object.defineProperty(i,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[r]=c}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function u(e){return t=>i.createElement(d,a({attr:o({},e.attr)},t),function e(t){return t&&t.map((t,s)=>i.createElement(t.tag,o({key:s},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var s,{attr:r,size:c,title:l}=e,u=function(e,t){if(null==e)return{};var s,i,r=function(e,t){if(null==e)return{};var s={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;s[i]=e[i]}return s}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(i=0;i<c.length;i++)s=c[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}(e,n),d=c||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),i.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,u,{className:s,style:o(o({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&i.createElement("title",null,l),e.children)};return void 0!==c?i.createElement(c.Consumer,null,e=>t(e)):t(r)}},89527:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var i=s(95155),r=s(12115),c=s(35695),n=s(10351),a=s(6874),l=s.n(a),o=s(25784),u=s(8333),d=s.n(u);function m(e){var t;let{musicSid:s}=e,[c,a]=(0,r.useState)(null),[u,m]=(0,r.useState)(!0),[h,_]=(0,r.useState)(null),[p,y]=(0,r.useState)("");(0,r.useEffect)(()=>{!async function(){m(!0),_(null);try{let e=await o.A.get("/music/music/".concat(s,"/detail/"));a(e.data)}catch(n){var e,t,i,r,c;console.error("API 호출 에러:",n),console.error("에러 상세:",null==(e=n.response)?void 0:e.data);let s="에러가 발생했습니다.";(null==(i=n.response)||null==(t=i.data)?void 0:t.error)?s=n.response.data.error:(null==(c=n.response)||null==(r=c.data)?void 0:r.detail)?s=n.response.data.detail:n.message&&(s=n.message),(s.includes("doesn't exist")||s.includes("Table"))&&(s="서버 데이터베이스 설정에 문제가 있습니다. 관리자에게 문의해주세요."),_(s)}finally{m(!1)}}()},[s]);let f=e=>e.reduce((e,t)=>{let s=t.musicCopyrightLyricLanguageName||t.musicCopyrightLyricLanguage;return e[s]||(e[s]=[]),e[s].push(t),e},{}),j=e=>e.includes("한국어")||e.includes("Korean")||e.includes("한글")?1:e.includes("영어")||e.includes("English")||e.includes("영문")?2:3,x=e=>e.sort((e,t)=>j(e)-j(t));if((0,r.useEffect)(()=>{(null==c?void 0:c.lyrics)&&c.lyrics.length>0&&y(x(Object.keys(f(c.lyrics)))[0])},[c]),u)return(0,i.jsx)("div",{className:d().container,children:(0,i.jsxs)("div",{className:d().loading,children:[(0,i.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,i.jsx)("p",{style:{marginTop:"8px"},children:"로딩 중..."})]})});if(h)return(0,i.jsx)("div",{className:d().container,children:(0,i.jsxs)("div",{className:d().error,children:[(0,i.jsxs)("p",{children:["에러: ",h]}),(0,i.jsxs)("p",{children:["musicSid: ",s]}),(0,i.jsx)(l(),{href:"/music-search",className:d().backLink,children:"검색 페이지로 돌아가기"})]})});if(!c)return(0,i.jsx)("div",{className:d().container,children:(0,i.jsxs)("div",{className:d().error,children:[(0,i.jsx)("p",{children:"음악 정보를 찾을 수 없습니다."}),(0,i.jsxs)("p",{children:["musicSid: ",s]}),(0,i.jsx)(l(),{href:"/music-search",className:d().backLink,children:"검색 페이지로 돌아가기"})]})});let b=c.lyrics?f(c.lyrics):{},v=Object.keys(b),g=x(v);return(0,i.jsxs)("div",{className:d().container,children:[(0,i.jsxs)("div",{className:d().header,children:[(0,i.jsx)("h1",{className:d().title,children:c.musicKorName}),c.musicEngName&&(0,i.jsx)("p",{className:d().subtitle,children:c.musicEngName})]}),(0,i.jsxs)("div",{className:d().content,children:[(0,i.jsx)("div",{className:d().infoSection,children:(0,i.jsxs)("div",{className:d().infoGrid,children:[(0,i.jsxs)("div",{className:d().infoItem,children:[(0,i.jsx)(n.JXP,{className:d().icon}),(0,i.jsx)("span",{className:d().label,children:"작사"}),(0,i.jsx)("span",{className:d().value,children:c.musicWrite||"-"})]}),(0,i.jsxs)("div",{className:d().infoItem,children:[(0,i.jsx)(n.$Mw,{className:d().icon}),(0,i.jsx)("span",{className:d().label,children:"작곡"}),(0,i.jsx)("span",{className:d().value,children:c.musicCompose||"-"})]}),(0,i.jsxs)("div",{className:d().infoItem,children:[(0,i.jsx)(n.jH2,{className:d().icon}),(0,i.jsx)("span",{className:d().label,children:"CCLI"}),(0,i.jsx)("span",{className:d().value,children:c.musicCCLI||"-"})]})]})}),c.lyrics&&c.lyrics.length>0&&(0,i.jsxs)("div",{className:d().lyricsSection,children:[(0,i.jsxs)("div",{className:d().noticeBox,children:[(0,i.jsx)("h3",{className:d().noticeTitle,children:"주의사항"}),(0,i.jsxs)("ul",{className:d().noticeList,children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{className:d().noticeIcon,children:"✓"}),"해당 곡은 온리원뮤직에서 관리하고 있는곡입니다."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{className:d().noticeIcon,children:"✓"}),"해당 곡을 앨범제작, 유통, 악보집, 책, 온라인판매등의 용도로 이용을 원하시면 저희 당사 홈페이지 또는 전화로 연락 주시면 최선을 다해 처리해 드리겠습니다."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{className:d().noticeIcon,children:"✓"}),"다른 언어로의 번역승인인 경우 아래에 표시된 언어의 가사를 확인하시고 해당 언어가 없을 경우는 번역 승인 신청이 가능합니다."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{className:d().noticeIcon,children:"✓"}),"해당 언어의 번역승인된 가사는 수정, 변경 승인이 불가합니다."]})]})]}),v.length>1&&(0,i.jsx)("div",{className:d().tabContainer,children:g.map(e=>(0,i.jsx)("button",{className:"".concat(d().tab," ").concat(p===e?d().activeTab:""),onClick:()=>y(e),children:e},e))}),(0,i.jsx)("div",{className:d().lyricsContent,children:p&&(null==(t=b[p])?void 0:t.map((e,t)=>(0,i.jsxs)("div",{className:d().lyricItem,children:[(0,i.jsx)("div",{className:d().lyricText,children:e.musicCopyrightLyric.split("\n").map((e,t)=>(0,i.jsx)("p",{className:d().lyricLine,children:e},t))}),e.musicCopyrightTranslation&&(0,i.jsxs)("div",{className:d().translation,children:[(0,i.jsx)("h4",{children:"번역"}),(0,i.jsx)("div",{className:d().translationText,children:e.musicCopyrightTranslation.split("\n").map((e,t)=>(0,i.jsx)("p",{className:d().translationLine,children:e},t))})]})]},e.musicCopyrightLyricSid||t)))})]})]})]})}function h(){let e=(0,c.useSearchParams)(),[t,s]=(0,r.useState)(null);return((0,r.useEffect)(()=>{s(e.get("musicSid"))},[e]),t)?(0,i.jsx)(m,{musicSid:t}):(0,i.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,i.jsx)("div",{className:"text-gray-600",children:"로딩중..."})]})})}function _(){return(0,i.jsx)(r.Suspense,{fallback:(0,i.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,i.jsx)("div",{className:"text-gray-600",children:"로딩중..."})]})}),children:(0,i.jsx)(h,{})})}},98014:(e,t,s)=>{Promise.resolve().then(s.bind(s,89527))}},e=>{var t=t=>e(e.s=t);e.O(0,[194,844,3464,6874,8441,1684,7358],()=>t(98014)),_N_E=e.O()}]);