(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5555],{2852:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>i});var s=l(95155),a=l(12115),r=l(31886),n=l(53999);function i(e){let{params:t}=e,[l,i]=(0,a.useState)("id"),[o,d]=(0,a.useState)(!1),[c,x]=(0,a.useState)(""),[m,u]=(0,a.useState)(""),[g,f]=(0,a.useState)({name:"",email:""}),[p,h]=(0,a.useState)({email:""}),[b,v]=(0,a.useState)("request"),[y,N]=(0,a.useState)(""),[j,w]=(0,a.useState)(""),[C,S]=(0,a.useState)(""),[k,_]=(0,a.useState)(0),[D,E]=(0,a.useState)(null),A=e=>{u(""),x(e)},I=e=>{x(""),u(e)},O=()=>{x(""),u("")},q=()=>{D&&(clearInterval(D),E(null))},M=async()=>{if(!g.name||!g.email)return void I("이름과 이메일을 모두 입력해주세요.");d(!0),O();try{let e=await (0,r.Md)(g);if(e.data){let t=e.data.user_id;A("아이디를 찾았습니다!\n\n아이디: ".concat(t,"\n\n보안을 위해 일부만 표시됩니다.")),f({name:"",email:""})}else I(e.error||"입력하신 정보와 일치하는 아이디를 찾을 수 없습니다.")}catch(e){console.error("아이디 찾기 오류:",e),I("아이디 찾기 중 오류가 발생했습니다.")}finally{d(!1)}},P=async()=>{if(!p.email)return void I("이메일을 입력해주세요.");d(!0),O();try{let e=await (0,r.w2)(p);if(e.data){A("인증코드가 이메일로 전송되었습니다. 5분 이내에 인증코드를 입력해주세요."),v("verify"),_(300),q();let e=setInterval(()=>{_(t=>t<=1?(clearInterval(e),I("인증 시간이 만료되었습니다. 다시 요청해주세요."),v("request"),E(null),0):t-1)},1e3);E(e)}else I(e.error||"인증코드 전송에 실패했습니다.")}catch(e){console.error("패스워드 재설정 요청 오류:",e),I("패스워드 재설정 요청 중 오류가 발생했습니다.")}finally{d(!1)}},Z=async()=>{if(!y||4!==y.length)return void I("4자리 인증코드를 입력해주세요.");d(!0),O();try{let e=await (0,r.RE)({verification_code:y});e.data?(q(),A("인증이 완료되었습니다. 새 비밀번호를 입력해주세요."),v("confirm"),_(0)):I(e.error||"인증코드가 일치하지 않습니다.")}catch(e){console.error("인증코드 확인 오류:",e),I("인증코드 확인 중 오류가 발생했습니다.")}finally{d(!1)}},L=async()=>{if(!j||!C)return void I("새 비밀번호를 입력해주세요.");let e=(0,n.Oj)(j);if(e)return void I(e);let t=(0,n._Z)(j,C);if(t)return void I(t);d(!0),O();try{let e=await (0,r.R4)({new_password:j,confirm_password:C});e.data?(A("비밀번호가 성공적으로 변경되었습니다. 로그인 페이지로 이동해주세요."),v("request"),h({email:""}),N(""),w(""),S("")):I(e.error||"비밀번호 변경에 실패했습니다.")}catch(e){console.error("비밀번호 변경 오류:",e),I("비밀번호 변경 중 오류가 발생했습니다.")}finally{d(!1)}},R=()=>{q(),v("request"),h({email:""}),N(""),w(""),S(""),_(0),O()};return(0,s.jsx)("div",{className:"min-h-[55vh] flex items-center justify-center bg-[#fafbfc] px-4 mb-60",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-12 w-full max-w-5xl",children:[(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-10 w-full max-w-md flex flex-col items-center",children:[(0,s.jsx)("img",{src:"/logo_dark.png",alt:"ONLY ONE MUSIC",className:"w-56 mb-8"}),(0,s.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1 mb-6 w-full",children:[(0,s.jsx)("button",{onClick:()=>{i("id"),O()},className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat("id"===l?"bg-[#1CA9E3] text-white":"text-gray-600 hover:text-gray-900"),children:"아이디 찾기"}),(0,s.jsx)("button",{onClick:()=>{i("password"),R()},className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat("password"===l?"bg-[#1CA9E3] text-white":"text-gray-600 hover:text-gray-900"),children:"패스워드 찾기"})]}),"id"===l&&(0,s.jsxs)("form",{className:"w-full flex flex-col gap-4",children:[(0,s.jsx)("input",{type:"text",value:g.name,onChange:e=>f(t=>({...t,name:e.target.value})),placeholder:"이름",className:"border-2 border-black rounded-md px-4 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,s.jsx)("input",{type:"email",value:g.email,onChange:e=>f(t=>({...t,email:e.target.value})),placeholder:"이메일",className:"border border-gray-300 rounded-md px-4 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,s.jsx)("button",{type:"button",onClick:M,disabled:o,className:"bg-[#1CA9E3] text-white py-3 rounded-md font-semibold text-lg hover:bg-[#189fd1] transition-colors mt-2 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"처리 중...":"아이디 찾기"})]}),"password"===l&&(0,s.jsxs)("div",{className:"w-full flex flex-col gap-4",children:["request"===b&&(0,s.jsxs)("form",{className:"w-full flex flex-col gap-4",children:[(0,s.jsx)("input",{type:"email",value:p.email,onChange:e=>h(t=>({...t,email:e.target.value})),placeholder:"이메일",className:"border-2 border-black rounded-md px-4 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,s.jsx)("button",{type:"button",onClick:P,disabled:o,className:"bg-[#1CA9E3] text-white py-3 rounded-md font-semibold text-lg hover:bg-[#189fd1] transition-colors mt-2 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"처리 중...":"인증코드 전송"})]}),"verify"===b&&(0,s.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"인증코드 입력"}),k>0&&(0,s.jsxs)("div",{className:"text-red-500 text-sm font-semibold",children:["남은 시간: ",Math.floor(k/60),":",(k%60).toString().padStart(2,"0")]})]}),(0,s.jsx)("input",{type:"text",value:y,onChange:e=>N(e.target.value.replace(/\D/g,"").slice(0,4)),placeholder:"4자리 인증코드",maxLength:4,className:"border-2 border-black rounded-md px-4 py-3 text-lg text-center tracking-widest focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,s.jsx)("button",{type:"button",onClick:Z,disabled:o||0===k,className:"bg-[#1CA9E3] text-white py-3 rounded-md font-semibold text-lg hover:bg-[#189fd1] transition-colors mt-2 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"확인 중...":"인증코드 확인"}),(0,s.jsx)("button",{type:"button",onClick:R,className:"text-gray-500 py-2 text-sm hover:text-gray-700 transition-colors",children:"다시 요청하기"})]}),"confirm"===b&&(0,s.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"새 비밀번호 입력"})}),(0,s.jsx)("input",{type:"password",value:j,onChange:e=>w(e.target.value),placeholder:"새 비밀번호 (8자 이상)",className:"border-2 border-black rounded-md px-4 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,s.jsx)("input",{type:"password",value:C,onChange:e=>S(e.target.value),placeholder:"새 비밀번호 확인",className:"border border-gray-300 rounded-md px-4 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,s.jsx)("button",{type:"button",onClick:L,disabled:o,className:"bg-[#1CA9E3] text-white py-3 rounded-md font-semibold text-lg hover:bg-[#189fd1] transition-colors mt-2 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"변경 중...":"비밀번호 변경"})]})]}),c&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4 w-full",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-green-600 text-lg font-semibold mb-2",children:"✅ 성공"}),c.includes("아이디:")?(0,s.jsxs)("div",{className:"text-green-700 text-sm",children:[(0,s.jsx)("div",{className:"mb-2",children:"아이디를 찾았습니다!"}),(0,s.jsxs)("div",{className:"bg-white border-2 border-green-300 rounded-lg p-3 mb-2",children:[(0,s.jsx)("div",{className:"text-gray-600 text-xs mb-1",children:"아이디"}),(0,s.jsx)("div",{className:"text-green-800 text-xl font-bold tracking-wider",children:c.split("아이디:")[1].split("\n")[0].trim()})]}),(0,s.jsx)("div",{className:"text-green-600 text-xs",children:"보안을 위해 일부만 표시됩니다."})]}):(0,s.jsx)("div",{className:"text-green-700 text-sm whitespace-pre-line",children:c})]})}),m&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4 w-full",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-red-600 text-lg font-semibold mb-2",children:"❌ 실패"}),(0,s.jsx)("div",{className:"text-red-700 text-sm",children:m})]})})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 text-gray-700 text-base",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD0D"}),"아이디를 잊으셨나요? 이름과 이메일로 찾을 수 있습니다."]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-gray-700 text-base",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD10"}),"패스워드를 잊으셨나요? 4자리 인증코드를 이메일로 발송합니다."]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-gray-700 text-base",children:[(0,s.jsx)("span",{className:"text-2xl",children:"⏰"}),"인증코드는 5분간 유효하며, 5분 이내에 입력해주세요."]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-gray-700 text-base",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD12"}),"보안을 위해 아이디는 4자리까지만 표시됩니다."]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-gray-700 text-base",children:[(0,s.jsx)("span",{className:"text-2xl",children:"⚠️"}),"등록되지 않은 정보로는 찾을 수 없습니다."]})]})]})})}},53999:(e,t,l)=>{"use strict";l.d(t,{Oj:()=>o,_Z:()=>d,cn:()=>n,vx:()=>i});var s=l(52596),a=l(39688),r=l(31886);function n(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return(0,a.QP)((0,s.$)(t))}let i=async(e,t)=>{try{let e=await (0,r.y4)();200===e.status||console.warn("⚠️ [utils.ts] 백엔드 로그아웃 실패, 클라이언트 로그아웃 진행")}catch(e){console.error("❌ [utils.ts] 로그아웃 API 호출 실패:",e)}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user_info"),["syscodeData","licenseApprovalStep","licenseApprovalKind","licenseApprovalFormData","licenseApprovalSaved"].forEach(e=>{localStorage.removeItem(e)}),window.dispatchEvent(new Event("loginStatusChanged")),e.push("/"),t&&t()},o=e=>{if(e.length<8)return"비밀번호는 8자 이상이어야 합니다.";if(/[&"'":%]/.test(e))return"비밀번호에 &, \", ', :, % 문자는 사용할 수 없습니다.";let t=/[A-Z]/.test(e),l=/[a-z]/.test(e);return[t,l,/\d/.test(e),/[!@#$^&*()_+\-=\[\]{};\\|,.<>/?]/.test(e)].filter(Boolean).length<3?"비밀번호는 영문 대소문자, 숫자, 특수문자 중 최소 3가지 조합이 필요합니다.":t||l?null:"비밀번호는 적어도 1개 이상의 영문 대소문자가 필요합니다."},d=(e,t)=>e!==t?"비밀번호가 일치하지 않습니다.":null},88877:(e,t,l)=>{Promise.resolve().then(l.bind(l,2852))}},e=>{var t=t=>e(e.s=t);e.O(0,[3464,4277,1886,8441,1684,7358],()=>t(88877)),_N_E=e.O()}]);