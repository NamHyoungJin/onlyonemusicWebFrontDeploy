(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{1001:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var a=t(95155),r=t(12115),l=t(35695),c=t(6874),m=t.n(c),i=t(25784),n=t(58929),x=t.n(n);function d(){let e=(0,l.useRouter)(),s=(0,l.useSearchParams)().get("id"),[t,c]=(0,r.useState)(null),[n,d]=(0,r.useState)(!0),[o,u]=(0,r.useState)(null),[h,p]=(0,r.useState)([]),[b,g]=(0,r.useState)(1),[j,N]=(0,r.useState)(1),[y,v]=(0,r.useState)(""),[f,A]=(0,r.useState)(""),[w,_]=(0,r.useState)([]),[S,k]=(0,r.useState)(""),[C,T]=(0,r.useState)(!1),L=!!s;(0,r.useEffect)(()=>{L&&s&&(async()=>{try{d(!0);let e=await i.A.get("/music/albums/".concat(s,"/"));c(e.data),u(null)}catch(s){var e,t;u((null==(t=s.response)||null==(e=t.data)?void 0:e.detail)||s.message||"앨범을 찾을 수 없습니다.")}finally{d(!1)}})()},[s,L]),(0,r.useEffect)(()=>{L||(async()=>{try{let e=await i.A.get("/music/albums/genres/");_(e.data.genres||[])}catch(e){console.error("장르 데이터 로딩 실패:",e)}})()},[L]),(0,r.useEffect)(()=>{L||e();async function e(){d(!0),u(null);try{let e=new URLSearchParams;e.append("format","json"),e.append("searchText",y),e.append("page",String(b)),e.append("page_size","30"),S&&e.append("musicAlbumTheme",S);let s=await i.A.get("/music/albums/?".concat(e.toString()));p(s.data.results||[]),N(s.data.total_pages||Math.ceil((s.data.count||0)/30)||1)}catch(t){var e,s;u((null==(s=t.response)||null==(e=s.data)?void 0:e.detail)||t.message||"에러가 발생했습니다.")}finally{d(!1),T(!1)}}},[b,y,S,L]);let I=e=>{k(e),g(1),T(!0)};return L?n?(0,a.jsx)("div",{className:"max-w-[1200px] mx-auto py-6 px-4",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("div",{className:"text-gray-600",children:"로딩중..."})]})})}):o||!t?(0,a.jsx)("div",{className:"max-w-[1200px] mx-auto py-6 px-4",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-red-600 mb-4",children:o||"앨범을 찾을 수 없습니다."}),(0,a.jsx)("button",{onClick:()=>e.back(),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"← 뒤로가기"})]})})}):(0,a.jsxs)("div",{className:"max-w-[1200px] mx-auto py-4 sm:py-6 px-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 sm:gap-10 p-4 sm:p-8 items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 self-center md:self-start",children:(0,a.jsx)("img",{src:t.image_url||"/mainImageNeigright01.png",alt:t.musicAlbumName,className:"w-48 h-48 sm:w-72 sm:h-72 object-cover rounded-xl bg-gray-100 shadow-md"})}),(0,a.jsxs)("div",{className:"flex-1 w-full text-center md:text-left",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-3 sm:mb-4 text-blue-900",children:t.musicAlbumName}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-2 mb-4 text-sm sm:text-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"아티스트:"})," ",t.musicAlbumArtist]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"기획사:"})," ",t.musicAlbumAgency]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"유통사:"})," ",t.musicAlbumDistribution]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"발매국가:"})," ",t.musicAlbumNationName]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"앨범성격:"})," ",t.musicAlbumTypeName]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"앨범장르:"})," ",t.musicAlbumThemeName]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"세부장르:"})," ",t.musicAlbumDetailsThemeName]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"발매매체:"})," ",t.musicAlbumMediaName]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"MIMS장르:"})," ",t.musicAlbumMimsThemeName]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"앨범상태:"})," ",t.musicAlbumStatusName]})]}),(0,a.jsxs)("div",{className:"mb-2 text-sm sm:text-lg",children:[(0,a.jsx)("span",{className:"font-semibold",children:"발매연도:"})," ",t.musicAlbumAnnouncementYear]})]})]}),t.albumServiceLinks&&t.albumServiceLinks.length>0&&(0,a.jsxs)("div",{className:"mt-6 sm:mt-8",children:[(0,a.jsx)("div",{className:"font-semibold text-lg sm:text-xl mb-3 sm:mb-4 text-blue-900",children:"음원 서비스"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3 sm:gap-4",children:t.albumServiceLinks.map(e=>(0,a.jsx)("a",{href:e.musicAlbumServiceLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:(0,a.jsx)("img",{src:e.musicAlbumServiceImageUrl?"/icons/".concat(e.musicAlbumServiceImageUrl):"/icons/companyIcon_".concat(e.musicAlbumServiceCode.toLowerCase(),".png"),alt:e.musicAlbumServiceCode,onError:s=>{let t=s.target;-1===t.src.indexOf("/icons/")&&(t.src="/icons/companyIcon_".concat(e.musicAlbumServiceCode.toLowerCase(),".png"))}})},e.musicAlbumServiceLinkSid))})]}),t.albumTracks&&t.albumTracks.length>0&&(0,a.jsxs)("div",{className:"mt-8 sm:mt-10",children:[(0,a.jsx)("div",{className:"font-semibold text-lg sm:text-xl mb-3 sm:mb-4 text-blue-900",children:"트랙 리스트"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-[600px] w-full border text-xs sm:text-sm bg-white rounded-xl",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-blue-100 text-blue-900",children:[(0,a.jsx)("th",{className:"py-2 px-2 sm:px-3 text-center text-xs sm:text-sm",children:"트랙번호"}),(0,a.jsx)("th",{className:"py-2 px-2 sm:px-3 text-left text-xs sm:text-sm",children:"곡명"}),(0,a.jsx)("th",{className:"py-2 px-2 sm:px-3 text-center text-xs sm:text-sm",children:"아티스트"}),(0,a.jsx)("th",{className:"py-2 px-2 sm:px-3 text-center text-xs sm:text-sm",children:"기본장르"}),(0,a.jsx)("th",{className:"py-2 px-2 sm:px-3 text-center text-xs sm:text-sm",children:"세부장르"}),(0,a.jsx)("th",{className:"py-2 px-2 sm:px-3 text-center text-xs sm:text-sm",children:"플레이시간"})]})}),(0,a.jsx)("tbody",{children:t.albumTracks.map(e=>(0,a.jsxs)("tr",{className:"border-b last:border-b-0",children:[(0,a.jsx)("td",{className:"py-2 px-2 sm:px-3 text-center text-xs sm:text-sm",children:e.musicAlbumTrackNumber}),(0,a.jsx)("td",{className:"py-2 px-2 sm:px-3 text-left text-xs sm:text-sm",children:e.musicAlbumTrackTitle}),(0,a.jsx)("td",{className:"py-2 px-2 sm:px-3 text-center text-xs sm:text-sm",children:e.musicAlbumTrackArtist}),(0,a.jsx)("td",{className:"py-2 px-2 sm:px-3 text-center text-xs sm:text-sm",children:e.musicAlbumTrackThemeName||e.musicAlbumTrackTheme}),(0,a.jsx)("td",{className:"py-2 px-2 sm:px-3 text-center text-xs sm:text-sm",children:e.musicAlbumTrackDetailsThemeName||e.musicAlbumTrackDetailsTheme}),(0,a.jsx)("td",{className:"py-2 px-2 sm:px-3 text-center text-xs sm:text-sm",children:e.musicAlbumTrackPlayTime})]},e.musicAlbumTrackSid))})]})})]}),t.musicAlbumReview&&(0,a.jsxs)("div",{className:"mt-8 sm:mt-10 p-4 sm:p-5 bg-blue-50 rounded-xl shadow-inner",children:[(0,a.jsx)("div",{className:"font-semibold mb-2 text-blue-800 text-sm sm:text-base",children:"앨범 정보"}),(0,a.jsx)("div",{className:"text-gray-700 whitespace-pre-line leading-relaxed text-sm sm:text-base",children:function(e){try{return decodeURIComponent(escape(window.atob(e)))}catch(s){return e}}(t.musicAlbumReview)})]}),(0,a.jsx)("div",{className:"mt-6 sm:mt-8",children:(0,a.jsx)("button",{onClick:()=>e.back(),className:"px-3 py-2 sm:px-4 sm:py-2 bg-gray-200 rounded hover:bg-gray-300 text-sm sm:text-base",children:"← 뒤로가기"})})]}):(0,a.jsxs)("div",{className:"max-w-[1200px] mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:x().searchBg,children:[(0,a.jsxs)("div",{className:x().searchRow,children:[(0,a.jsx)("h1",{className:x().title,children:"앨범(ALBUM)"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),g(1),v(f.trim())},className:x().searchForm,children:[(0,a.jsx)("input",{type:"text",value:f,onChange:e=>A(e.target.value),placeholder:"앨범명, 아티스트 등 검색",className:x().searchInput}),(0,a.jsx)("button",{type:"submit",className:x().searchButton,children:"검색"})]})]}),(0,a.jsxs)("div",{className:x().genreBtns,children:[(0,a.jsx)("button",{type:"button",className:"px-4 py-2 rounded border text-sm ".concat(""===S?"bg-orange-500 text-white":"bg-gray-100 hover:bg-gray-200"," ").concat(C?"opacity-50 cursor-not-allowed":""),onClick:()=>I(""),disabled:C,children:"전체 장르"}),w.map(e=>(0,a.jsx)("button",{type:"button",className:"px-4 py-2 rounded border text-sm ".concat(S===e.sysCodeSid?"bg-orange-500 text-white":"bg-gray-100 hover:bg-gray-200"," ").concat(C?"opacity-50 cursor-not-allowed":""),onClick:()=>I(e.sysCodeSid),disabled:C,children:e.sysCodeName},e.sysCodeSid))]})]}),(n||C)&&(0,a.jsxs)("div",{className:x().loadingContainer,children:[(0,a.jsx)("div",{className:x().loadingSpinner}),(0,a.jsx)("span",{className:"text-gray-500",children:"로딩 중..."})]}),o&&(0,a.jsx)("div",{className:"text-center text-red-500 py-8 whitespace-pre-line",children:o}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 sm:gap-6",children:h.map((e,s)=>(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-3 sm:p-4 flex flex-col items-center",children:[(0,a.jsx)(m(),{href:"/album/?id=".concat(e.musicAlbumSid),children:(0,a.jsx)("img",{src:e.image_url||"/mainImageNeigright01.png",alt:e.musicAlbumName,className:"w-24 h-24 sm:w-40 sm:h-40 object-cover rounded-lg mb-2 sm:mb-3 bg-gray-100 hover:scale-105 transition-transform cursor-pointer"})}),(0,a.jsx)("div",{className:"font-semibold text-sm sm:text-lg text-center mb-1",children:e.musicAlbumName}),(0,a.jsx)("div",{className:"text-blue-700 text-xs sm:text-sm mb-1",children:e.musicAlbumArtist}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.musicAlbumAnnouncementYear})]},e.musicAlbumSid||s))}),!n&&!C&&0===h.length&&!o&&(0,a.jsx)("div",{className:"text-center text-gray-400 py-8",children:"앨범 정보가 없습니다."}),!n&&j>1&&(0,a.jsxs)("div",{className:"flex justify-center mt-6 sm:mt-8 gap-1 sm:gap-2",children:[(0,a.jsx)("button",{className:"px-2 py-1 sm:px-3 sm:py-1 rounded border bg-white text-gray-700 disabled:opacity-50 text-xs sm:text-sm",onClick:()=>g(e=>Math.max(1,e-1)),disabled:1===b,children:"이전"}),(0,a.jsx)("button",{className:"px-2 py-1 sm:px-3 sm:py-1 rounded border text-xs sm:text-sm ".concat(1===b?"bg-blue-600 text-white":"bg-white text-gray-700"),onClick:()=>g(1),disabled:1===b,children:"1"}),b>6&&j>10&&(0,a.jsx)("span",{className:"px-1 text-xs sm:text-sm",children:"..."}),(()=>{let e=Math.max(2,b-4),s=Math.min(j-1,b+4);b<=6?(e=2,s=Math.min(9,j-1)):b>=j-5&&(e=Math.max(2,j-8),s=j-1);let t=[];for(let r=e;r<=s;r++)t.push((0,a.jsx)("button",{className:"px-2 py-1 sm:px-3 sm:py-1 rounded border text-xs sm:text-sm ".concat(r===b?"bg-blue-600 text-white":"bg-white text-gray-700"),onClick:()=>g(r),disabled:r===b,children:r},r));return t})(),b<j-5&&j>10&&(0,a.jsx)("span",{className:"px-1 text-xs sm:text-sm",children:"..."}),j>1&&(0,a.jsx)("button",{className:"px-2 py-1 sm:px-3 sm:py-1 rounded border text-xs sm:text-sm ".concat(b===j?"bg-blue-600 text-white":"bg-white text-gray-700"),onClick:()=>g(j),disabled:b===j,children:j}),(0,a.jsx)("button",{className:"px-2 py-1 sm:px-3 sm:py-1 rounded border bg-white text-gray-700 disabled:opacity-50 text-xs sm:text-sm",onClick:()=>g(e=>Math.min(j,e+1)),disabled:b===j,children:"다음"})]})]})}function o(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"max-w-[1200px] mx-auto px-4 py-8",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("div",{className:"text-gray-600",children:"로딩중..."})]})})}),children:(0,a.jsx)(d,{})})}},25784:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var a=t(23464);let r=()=>{let e="https://api.onlyonemusic.com/api";return e?e.endsWith("/api")?e:"".concat(e,"/api"):"http://localhost:8000/api"},l=a.A.create({baseURL:r(),withCredentials:!0});l.interceptors.request.use(e=>{{let s=localStorage.getItem("access_token");s&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(s))}return e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{let s=e.config;if(e.response&&401===e.response.status&&!s._retry){s._retry=!0;try{let e,m=localStorage.getItem("refresh_token"),i="".concat(r(),"/token/refresh/"),n=await a.A.post(i,{refresh:m},{withCredentials:!0});if(n.data.onlyonemusicAPIResponse){var t,c;let s=n.data.onlyonemusicAPIResponse;"00"===s.ErrorCode&&(null==(t=s.Result)?void 0:t.access)?e=s.Result.access:console.error("❌ [axios.ts] 새로운 포맷 조건 불만족 - ErrorCode:",s.ErrorCode,"Result.access 존재:",!!(null==(c=s.Result)?void 0:c.access))}else n.data.access?e=n.data.access:console.error("❌ [axios.ts] 지원되지 않는 응답 포맷:",n.data);return e&&"string"==typeof e&&e.trim().length>0?localStorage.setItem("access_token",e):(console.error("❌ [axios.ts] 유효하지 않은 access_token:",e),console.error("❌ [axios.ts] 토큰 갱신 실패 - undefined 또는 빈 값")),e&&"string"==typeof e&&e.trim().length>0&&(s.headers=s.headers||{},s.headers.Authorization="Bearer ".concat(e)),l(s)}catch(e){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/membership/login",Promise.reject(e)}}return Promise.reject(e)});let c=l},33520:(e,s,t)=>{Promise.resolve().then(t.bind(t,1001))},35695:(e,s,t)=>{"use strict";var a=t(18999);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},58929:e=>{e.exports={searchBg:"AlbumList_searchBg___A71f",title:"AlbumList_title__9F_Xw",searchRow:"AlbumList_searchRow__FAJjX",searchForm:"AlbumList_searchForm__8Fa1l",searchInput:"AlbumList_searchInput__xpCFL",searchButton:"AlbumList_searchButton__yCCet",genreBtns:"AlbumList_genreBtns__nxirJ",loadingSpinner:"AlbumList_loadingSpinner__v_zMT",spin:"AlbumList_spin__GBqs4",loadingContainer:"AlbumList_loadingContainer__n0i82"}}},e=>{var s=s=>e(e.s=s);e.O(0,[4622,3464,6874,8441,1684,7358],()=>s(33520)),_N_E=e.O()}]);